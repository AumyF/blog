---
layout: "../../../../../layouts/BlogPostLayout.astro"
title: "パーサジェネレータ今からやるならParolってのがイケてるらしい"
tag: ["Parol", "Rust"]
synopsis: "Parolやれ"
---

**Parol** というパーサジェネレータがあることを知った。EBNF に似た専用の文法定義フォーマット (拡張子 `.par`) をもち、Rust のコードを生成してくれるという。なお筆者は構文解析についての専門的な知識をいっさい有しないので LL(k)がどうとかみたいな話はしないこととする。

# 環境構築

Parol プロジェクト配下では `parol` という CLI と `parol-ls` という language server の crate があり、適当に `cargo install parol parol-ls` すると (きみの Ryzen が火を吹いたあとに) 開発環境一式がインストールされるという寸法になっている。`.par` ファイルのサポートを追加する VS Code 向けの拡張機能も提供されており偉い。Neovim なのであまり関係ないが……

Parol CLI で `parol new` するといい感じになる

# 文法定義

生成文法、シンボル、終端記号はリテラルのようなもので、これ以上分解することができない。`/[0-9]+/` のような正規表現でも書けるし、`'function'` のような生文字列でも書ける。非終端記号は記号

非終端記号の定義にはいろいろな記号が使える。`['-'] IntLiteral` で optional なもの。`IntLiteral {'+' IntLiteral}` で繰り返し。`('+' | '-')` で OR。

EBNF 由来の定義はシンタックスシュガーであり、これらを使わない形に分解できる。

# 実装

コードジェネレーションするとトレイトが生えるのでそれに実装する。
